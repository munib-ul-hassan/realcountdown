<%- include("../partials/admin/header") %>
<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->
    <%- include("../partials/admin/navbar") %>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content">
        <!-- Topbar -->
        <%- include("../partials/admin/top-nav") %>
        <!-- End of Topbar -->


          <!-- Begin Page Content -->
          <div class="container-fluid">
            <!-- DataTales Example -->
            <div class="card shadow mb-4">
              <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                  Agent To Seller
                </h6>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table
                    class="table table-bordered"
                    id="dataTable"
                    width="100%"
                    cellspacing="0"
                  >
                    <thead>
                      <tr class="text-center">
                        <th>Agent Name(Sender)</th>
                        <th>Seller Name (Recevier)</th>
                        <th>Reveiew</th>
                      </tr>
                    </thead>

                    <tbody>
                      <% sellers.forEach(seller => { %>
                        <% seller.promotionalMessages.forEach(message => { %>
                      <tr class="">
                        <td class="text-center"><%= message.agentId.name %></td>
                        <td class="text-center"><%= seller.name %></td>

                        <td class="text-center">
                          <button
                            type="button"
                            class="btn btn-primary .bd-example-modal-lg"
                            data-toggle="modal"
                            data-target="#modal-<%= message._id %>"
                          >
                            Review
                          </button>

                          <div
                            class="modal fade bd-example-modal-lg"
                            tabindex="-1"
                            role="dialog"
                            id="modal-<%= message._id %>"
                            aria-labelledby="myLargeModalLabel"
                            aria-hidden="true"
                          >
                            <div class="modal-dialog modal-lg">
                              <div class="modal-content">
                                <form action="/admin/edit-promotional-message-seller/<%= message._id %>/<%= seller._id %>" method="POST">
                                  <button
                                    type="button"
                                    class="close pr-1"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                  >
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                  <div class="row pl-3">
                                    <div class="col-md-9">
                                      <div class="form-group">
                                        <label
                                          for="message-text"
                                          class="col-form-label"
                                          >Message:</label
                                        >
                                        <textarea
                                          class="form-control"
                                          id="message-text"
                                          name="message"
                                        ><%= message.message  %></textarea
                                        >
                                      </div>
                                    </div>
                                    <div class="col-md-3 d-flex">
                                      <input
                                        class="btn btn-primary m-1"
                                        style="
                                          height: 40px;
                                          position: relative;
                                          top: 45px;
                                        "
                                        name="action"
                                        type="submit"
                                        value="Edit"
                                      />
                                      <% if(!message?.approve){ %>
                                      <input
                                        class="btn btn-primary m-1"
                                        style="
                                          height: 40px;
                                          position: relative;
                                          top: 45px;
                                        "
                                         name="action"
                                        type="submit"
                                        value="Approve"
                                      />
                                      <% } %>
                                    </div>
                                  </div>
                                </form>

                                <div class="modal-footer">
                                  <button
                                    type="button"
                                    class="btn btn-secondary"
                                    data-dismiss="modal"
                                  >
                                    Close
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- <button type="button" class="btn btn-primary " data-toggle="modal" data-target="#exampleModal" data-whatever="@getbootstrap">Review</button>
                                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLabel">Details Agent Review Request</h5>
                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <form>
                                                                    <div class="row">
                                                                        <div class="col-md-8">
                                                                            <div class="form-group">
                                                                                <label for="message-text" class="col-form-label">Message:</label>
                                                                                <textarea class="form-control" id="message-text">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quis quod maiores odio voluptas culpa inventore rem facilis, laborum sint? Ut deleniti excepturi minima numquam ratione tempora voluptates optio hic nemo expedita, doloremque, eaque consectetur nihil asperiores, eligendi corporis fugit natus!

                                                                                </textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 d-flex">

                                                                            <input class="btn btn-primary m-1" style="height: 40px; position: relative; top: 45px;" type="submit" value="Edit">
                                                                            <input class="btn btn-primary m-1" style="height:40px; position: relative; top: 45px;" type="submit" value="Approve">
                                                                        </div>
                                                                    </div>

                                                                </form>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <input class="btn btn-primary" type="submit" value="Edit">

                                                                <input class="btn btn-danger" type="reset" value="Delete">
                                                                <input class="btn btn-primary" type="submit" value="Unapprove">

                                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> -->
                        </td>
                      </tr>
                      <% })}) %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>


        </div>
        <!-- End of Main Content -->

               <!-- End of Main Content -->
               <%- include("../partials/footer") %>

               <!-- Bootstrap core JavaScript-->
             </body>

             <%- include("../partials/scripts") %>
           </html>

